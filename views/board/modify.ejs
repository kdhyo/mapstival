<html>

<head>
  <title>Mapstival</title>
  <meta charset="utf-8" />
  <link rel="stylesheet" href="/css/style.css" />
  <link rel="stylesheet" href="/css/star.css" />
  <link rel="shortcut icon" href="/images/favicon.ico" />

</head>
<style>
  body {padding-left: 32%; padding-top: 6%;}
  /* .comment-form-wrap { box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.5);} */
</style>
<body>
  <div class="comment-form-wrap pt-5" style="width: 726px; height: 608px;">
    <form action="/board/update" method="post" class="p-5 bg-light">
      <h4 class="mb-5">축제는 어땠나요?<br>소중한 후기를 적어주세요!</h4>
      <div class="form-group">
        <label for="name">Name *</label>
        <input type="text" id="nickname" name="nickname" style="width: 100%;" value="<%= dbName %>" />
      </div>
      <div class="form-group">
        <label for="password">password *</label>
        <input type="password" id="password" name="password" style="width: 100%;" value="" onfocus="this.value=''" />
      </div>
      <div class="form-group">
        <label for="password">Rating *</label>
        <div><% include ../includes/star %>
        </div>
      </div>
      <div class="form-group">
        <label for="message">Message *</label>
        <input type="text" id="review" name="review" style="width: 100%;" value="<%= dbReView %>" />
      </div>
      <!-- <div class="form-group">
        <input type="submit" id="nullCK" value="Write" class="btn py-0 px-3  btn-primary" style="font-size: 20px">
      </div> -->
      <tr>
        <td colspan="4" style="text-align: center;">
          <div>
            <input type="hidden" name="index" id="index" value="<%= idx %>" />
            <input type="hidden" name="fastivalId" id="fastivalId" value="<%=dbId%>" />
            <input type="submit" value="수정" id="btnSave" class="btn py-0 px-3  btn-primary" style="font-size: 20px;" />
            <form action="/mapstival/detail" method="get">
              <input type="submit" id="btnList" onclick="" value="목록"class="btn py-0 px-3  btn-primary" style="font-size: 20px" />
            </form>
            <input type="button" id="btnDelete" href="#" onclick="fnDeleteData('<%=idx%>');" value="삭제" class="btn py-0 px-3  btn-primary" style="font-size: 20px"/>
      </tr>
    </form>
  </div>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="/js/star.js"></script>
  <script>

    //저장 버튼을 클릭 시 백엔드 저장 api 호출 데이터 저장처리 후 목록 페이지 이동
    $("#btnSave").click(function () {
      if ($("#nickname").val() == "") {
        alert("이름을 입력해주세요.");
        $("#nickname").focus();
        return false;
      }
      if ($("#password").val() == "") {
        alert("비밀번호를 입력해주세요.");
        $("#password").focus();
        return false;
      }
      if ($("#review").val() == "") {
        alert("후기내용을 입력해주세요.");
        $("#review").focus();
        return false;
      }
    })

    //삭제확인을 받은 후 삭제하는 라우터로 이동
    function fnDeleteData(idx) {
      if (confirm("정말로 삭제하시겠습니까?")) {
        location.href = "/board/delete?id=" + idx;
      } else {
        alert("삭제를 취소하셨습니다.");
      }
    }
  </script>
</body>

</html>